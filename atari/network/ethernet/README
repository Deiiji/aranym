aranym.xif
==========

The xif interface for the eth0 interface for MiNT-Net.

Installation and usage
----------------------

 On host side (linux):
 ---------------------

Make sure the 'aratapif' (ARAnyM TAP IFconfig) binary is installed somewhere
in your $PATH (/usr/bin or /usr/local/bin) and that it is installed setuid
root. If it's not use the following commands (run them as root):

linux:~# chown root /usr/bin/aratapif
linux:~# chmod u+s /usr/bin/aratapif

Another important thing is to load the tuntap device driver (if it isn't
compiled in the host kernel). I load it with the following command:

linux:~# modprobe tun

And before loading this driver please check (and possibly fix) the 
read/write permissions of the "/net/dev/tun" device:

linux:~# chmod +rw /net/dev/tun

Otherwise ARAnyM started by regular user could not access this device.

 On Atari side:
 --------------

Install MiNT-Net and copy the aranym.xif into your mint folder.
Then configure the eth0 interface - please note that the IP addresses are
currently hardcoded in the ARAnyM source code (XIF_ATARI_IP and XIF_HOST_IP
in aranym/src/natfeat/ece.cpp):

mint:~# ifconfig eth0 addr 192.168.0.2 up
mint:~# route add default eth0 gw 192.168.0.1

Then in MiNT-Net you can e.g. ping to 192.168.0.1 (which is a host side
of the TAP tunnel).

How it works
------------

The ARAnyM establishes the TAP interface (using tuntap driver).
tuntap linux driver: /usr/src/linux/Documentation/networking/tuntap.txt
Some related info can be found at the following URLs:
	VTUN (virtual tunnel)
		http://vtun.sourceforge.net/tun
	Hercules (s390 emulator)
		http://www.conmicro.cx/hercules/


Compilation
-----------
 * to compile the xif you need the source tree of FreeMiNT 1.16 (use
   CVS head branch) and if compiling on host, don't forget to edit
   the CONFIGVARS and enable the CROSS=yes there. Point the
   FREEMINT_SRC_HOME environment variable to its home (the
   COPYING.MiNT file is there).
 * use make.sh to compile
 * the binaries are placed into the .bin subfolder

 ARAnyM binary:
 * run configure with --enable-ethernet

