#!/bin/bash

# set CWD to saxonserver home directory
cd `dirname $0`

# check whether it's already running
ps a | grep java | grep saxon\.jar > /dev/null
if [ $? -ne 0 ]
then
	# if user passed "status" as the parameter then just report and exit
	if [ $# -ne 0 ]
		then
		if [ $1 == "status" ]
		then
			echo "saxonserver is not running."
			exit 1;
		fi
	fi

	# if saxon.jar is missing try to download it from ftp server
	if [ ! -f saxon.jar ]
	then
		echo "Downloading saxon.jar..."
		wget ftp://ftp.sophics.cz/pub/aranym/tools/saxon.jar
	fi
	echo "Starting saxon.jar..."
	java -classpath $PWD/saxon.jar Main
else
	echo "saxon.jar is already running..."
	exit 0
fi
